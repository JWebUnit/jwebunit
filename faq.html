<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at 2015-10-08 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>JWebUnit - Frequently Asked Questions</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
        <style>body{padding-top: 20px;}</style>
    
    <script type="text/javascript" src="./js/apache-maven-fluido.min.js"></script>

    
    <meta name="Date-Revision-yyyymmdd" content="20151008" />
    <meta http-equiv="Content-Language" content="en" />
    
        </head>
  <body>
        
    
        <div class="container-fluid">
                <div id="banner">
        <div class="pull-left">                  <a href="http://sourceforge.net/projects/jwebunit" id="bannerLeft">
                                        <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=61302&type=15" alt="SourceForge"/>
                </a>
      </div>
        <div class="pull-right">                  <a href="http://jwebunit.sourceforge.net" id="bannerRight">
                                                <img src="images/jwebunit-logo.png" alt="JWebUnit"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>
      
      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                
                  <li id="publishDate">Last Published: 2015-10-08</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 3.3-SNAPSHOT</li>
                                      
                
              </ul>
      </div>

            <div id="leftColumn" class="sidebar">
        <div class="well">
                
                
                                   <h5>JWebUnit</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Home">Home</a>
            </li>
          </ul>
                       <h5>User documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="installation.html" title="Installation">Installation</a>
            </li>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="quickstart.html" title="Quick start">Quick start</a>
                  </li>
                  <li class="none">
                          <a href="migration.html" title="Migration guide">Migration guide</a>
            </li>
                  <li class="none">
                          <a href="articles.html" title="Articles">Articles</a>
            </li>
                  <li class="none">
            <strong>FAQ</strong>
          </li>
          </ul>
                       <h5>Developper documentation</h5>
                  <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="building-maven.html" title="Building JWebUnit">Building JWebUnit</a>
                  </li>
                  <li class="none">
                          <a href="how-to-contribute.html" title="How-To contribute">How-To contribute</a>
            </li>
                  <li class="none">
                          <a href="how-to-release.html" title="How-To release">How-To release</a>
            </li>
          </ul>
                       <h5>Sourceforge</h5>
                  <ul>
                  <li class="none">
                          <a href="http://sourceforge.net/projects/jwebunit" class="externalLink" title="Project page">Project page</a>
            </li>
                  <li class="none">
                          <a href="http://sourceforge.net/projects/jwebunit/files" class="externalLink" title="Download">Download</a>
            </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="jwebunit-code-generator/index.html" title="Code Generator">Code Generator</a>
            </li>
                  <li class="none">
                          <a href="jwebunit-core/index.html" title="Core - API">Core - API</a>
            </li>
                  <li class="none">
                          <a href="jwebunit-commons-tests/index.html" title="Commons Tests">Commons Tests</a>
            </li>
                  <li class="none">
                          <a href="jwebunit-htmlunit-plugin/index.html" title="HtmlUnit Plugin">HtmlUnit Plugin</a>
            </li>
                  <li class="none">
                          <a href="jwebunit-webdriver-plugin/index.html" title="Webdriver Plugin">Webdriver Plugin</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                      
                
      
          
          <div id="poweredBy">
                            <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                </div>
        </div>
      </div>
      
      <div id="bodyColumn" class="content">
        <div id="contentBox">
                              
          <!-- Copyright (c) 2002-2014, JWebUnit team.

    This file is part of JWebUnit.

    JWebUnit is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    JWebUnit is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with JWebUnit.  If not, see <http://www.gnu.org/licenses/>. --><div class="section">
<h2><a name="top">Frequently Asked Questions</a><a name="Frequently_Asked_Questions"></a></h2>
<p><b>JavaScript</b></p>
<ol style="list-style-type: decimal">
<li><a href="#javascript-support">
        What about JWebUnit support of JavaScript?
      </a></li>
<li><a href="#javascript-errors">
        What can I do when JavaScript errors are thrown with JWebUnit (and HtmlUnit testing engine), but not in my browser?
      </a></li>
<li><a href="#javascript-json">
      	How can I parse JSON output using JWebUnit or HtmlUnit?
      </a></li></ol>
<p><b>JUnitPerf</b></p>
<ol style="list-style-type: decimal">
<li><a href="#junitperf-support">
        Can I use JWebUnit coupled with JUnitPerf to do load testing?
      </a></li></ol>
<p><b>HtmlUnit testing engine</b></p>
<ol style="list-style-type: decimal">
<li><a href="#htmlunit-change-refreshhandler">
        How can I change HtmlUnit refresh handler (default is ImmediateRefreshHandler)?
      </a></li></ol></div>
<div class="section">
<h2>JavaScript<a name="JavaScript"></a></h2>
<dl>
<dt><a name="javascript-support">
        What about JWebUnit support of JavaScript?
      </a></dt>
<dd>
        
<p>JWebUnit uses a testing engine to manipulate DOM and JavaScript. That's why
JavaScript support depend on the testing engine. In the past, JWebUnit was based on HttpUnit.
JavaScript support of HttpUnit is very poor.<br /></br>
Now, JWebUnit main testing engine is HtmlUnit. HtmlUnit understanding of JavaScript is quite good.</p>
      
<p align="right"><a href="#top">[top]</a></p><hr /></dd>
<dt><a name="javascript-errors">
        What can I do when JavaScript errors are thrown with JWebUnit (and HtmlUnit testing engine), but not in my browser?
      </a></dt>
<dd>
        
<p>First, check if your JavaScript is not browser specific. When possible, try to write a minimal test case that reproduce your error, and submit it to the HtmlUnit team to help them to improve HtmlUnit.<br /></br>
Finally, you can temporary disable JavaScript in your test:</p>
	
<div class="source">
<pre>public void testFoo() {
  beginAt(&quot;blabla&quot;);
  ...
  setScriptingEnabled(false);
  ...//Problematic code
  setScriptingEnabled(true);
  ...
}</pre></div>
Have a look at http://htmlunit.sourceforge.net/submittingJSBugs.html
      
<p align="right"><a href="#top">[top]</a></p><hr /></dd>
<dt><a name="javascript-json">
      	How can I parse JSON output using JWebUnit or HtmlUnit?
      </a></dt>
<dd>
        
<p>HtmlUnit, one of the underlying engines of JWebUnit, <a class="externalLink" href="http://stackoverflow.com/questions/2932857/html-handling-a-json-response">does not support direct
        execution of Javascript functions</a>. You need to check beforehand that the <tt>Content-Type</tt>
        of the response is <tt>application/json</tt>, and then use a different library to parse it.</p>
        
        
<p>For example, <a class="externalLink" href="http://code.google.com/p/google-gson/">Google Gson</a> can be used to parse JSON, as follows:</p>
        
        
<div class="source">
<pre>WebResponse response = ((HtmlUnitTestingEngineImpl) JWebUnit.getTestingEngine()).getWebResponse();
		
// check content type
assertTrue(&quot;Response type should be application/json, was: &quot; + response.getContentType(), &quot;application/json&quot;.equals(response.getContentType()));

// parse JSON
Gson gson = new Gson();
String json = response.getContentAsString();
JsonObject obj = new JsonParser().parse(json).getAsJsonObject(); // or JsonArray, depending on the JSON content

assertTrue(&quot;Object should have success field&quot;, obj.has(&quot;success&quot;));
String success = gson.fromJson(obj.get(&quot;success&quot;), String.class);
String username = gson.fromJson(obj.get(&quot;username&quot;), String.class);
String type = gson.fromJson(obj.get(&quot;type&quot;), String.class);
// etc</pre></div> 
      
<p align="right"><a href="#top">[top]</a></p></dd></dl></div>
<div class="section">
<h2>JUnitPerf<a name="JUnitPerf"></a></h2>
<dl>
<dt><a name="junitperf-support">
        Can I use JWebUnit coupled with JUnitPerf to do load testing?
      </a></dt>
<dd>
        
<p>Yes, but you have to take care when writing your JUnitPerf test. You need to use a TestFactory:</p>
	
<div class="source">
<pre>int users = 10;
Test factory = new TestFactory(MyJWebUnitTest.class);
Test loadTest = new LoadTest(factory, users);</pre></div>
      
<p align="right"><a href="#top">[top]</a></p></dd></dl></div>
<div class="section">
<h2>HtmlUnit testing engine<a name="HtmlUnit_testing_engine"></a></h2>
<dl>
<dt><a name="htmlunit-change-refreshhandler">
        How can I change HtmlUnit refresh handler (default is ImmediateRefreshHandler)?
      </a></dt>
<dd>
        
<p>Warning: this is not something easily portable to other testing engine.</p>
	
<div class="source">
<pre>if (getTestingEngine() instanceof HtmlUnitTestingEngineImpl) {
	HtmlUnitTestingEngineImpl engine = (HtmlUnitTestingEngineImpl) getTestingEngine();			
	engine.setRefreshHandler(new ThreadedRefreshHandler());
}</pre></div>
      
<p align="right"><a href="#top">[top]</a></p></dd></dl></div>
                  </div>
      </div>
    </div>

    <footer class="footer">
            <div class="container-fluid">
              <div class="row span16">Copyright &copy;                    2002-2015
                        <a href="https://github.com/JWebUnit">JWebUnit</a>.
            All Rights Reserved.      
                
      </div>

                      </div>
    </footer>
  </body>
</html>